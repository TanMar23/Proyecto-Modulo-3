{"ast":null,"code":"import _classCallCheck from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import MapboxDirections from\"@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions\";import mapboxgl from\"mapbox-gl\";import axios from'axios';import Layout from'../Layout';import{MyContext}from'../../context/index';import{NavLink}from'react-router-dom';mapboxgl.accessToken=\"pk.eyJ1IjoibWx6eiIsImEiOiJjandrNmVzNzUwNWZjNGFqdGcwNmJ2ZWhpIn0.ybY6wnAtJwj-Tq0c46sW6A\";var Center=/*#__PURE__*/function(_Component){_inherits(Center,_Component);function Center(){var _getPrototypeOf2;var _this;_classCallCheck(this,Center);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_possibleConstructorReturn(this,(_getPrototypeOf2=_getPrototypeOf(Center)).call.apply(_getPrototypeOf2,[this].concat(args)));_this.state={center:{},user:JSON.parse(localStorage.getItem('user'))};return _this;}_createClass(Center,[{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;axios.get(\"https://young-beyond-07801.herokuapp.com/api/center/\".concat(this.props.match.params.id)).then(function(res){_this2.setState({center:res.data.place});var map=new mapboxgl.Map({container:_this2.mapContainer,style:\"mapbox://styles/mapbox/streets-v9\"});if(navigator.geolocation){navigator.geolocation.getCurrentPosition(function(position){var user_location=[position.coords.longitude,position.coords.latitude];map.setZoom(12).setCenter(user_location);new mapboxgl.Marker({color:\"red\"}).setLngLat(user_location).setPopup(new mapboxgl.Popup().setHTML(\"<h3>Usted está aquí</h3>\")).addTo(map);});}if(_this2.state.center.longitud&&_this2.state.center.latitud){var center_location=[_this2.state.center.longitud,_this2.state.center.latitud];new mapboxgl.Marker({color:\"green\"}).setLngLat(center_location).setPopup(new mapboxgl.Popup().setHTML(\"<h3>Destino</h3>\")).addTo(map);}map.addControl(new mapboxgl.GeolocateControl({positionOptions:{enableHighAccuracy:true},trackUserLocation:true,showUserLocation:true}));map.addControl(new MapboxDirections({accessToken:mapboxgl.accessToken,unit:\"metric\",language:\"es\",placeholderOrigin:\"Seleccione su lugar de origen\",placeholderDestination:\"Seleccione su destino\"}),\"top-left\");map.addControl(new mapboxgl.NavigationControl());});}},{key:\"render\",value:function render(){var _this3=this;var user=this.state.user;return React.createElement(Layout,{history:this.props.history},React.createElement(\"div\",{className:\"section\"},React.createElement(\"div\",{className:\"container\"},React.createElement(\"p\",{className:\"has-text-centered category-center\"},\"Categoria: \",this.state.center.tipoResiduo),React.createElement(\"div\",{className:\"columns\"},React.createElement(\"div\",{className:\"column is -7 map\",style:{width:\"50vw\",height:\"90vh\"},ref:function ref(e){return _this3.mapContainer=e;}}),React.createElement(\"div\",{className:\"column is-5 data\"},React.createElement(\"div\",{className:\"card\"},React.createElement(\"header\",{className:\"card-header\"},React.createElement(\"p\",{className:\"card-header-title card-text\"},this.state.center.empresa)),React.createElement(\"div\",{className:\"card-content\"},React.createElement(\"div\",{className:\"content\"},React.createElement(\"p\",null,\"Direccion: \",this.state.center.address),React.createElement(\"p\",null,\"Email: \",this.state.center.email?this.state.center.email:'No disponible'),React.createElement(\"p\",null,\"Numero: \",this.state.center.contactNumber?this.state.center.contactNumber:'No disponible'),React.createElement(\"p\",null,\"Website: \",this.state.center.website?this.state.center.website:'No disponible'),React.createElement(\"p\",null,\"Horario: \",this.state.center.horario?this.state.center.horario:'No disponible')),React.createElement(\"div\",{className:\"home-button\"},user.role==='USUARIO'?React.createElement(React.Fragment,null,React.createElement(NavLink,{exact:true,to:\"/contribution\"},React.createElement(\"button\",{className:\"button is-primary\"},\"Quiero contribuir!\"))):React.createElement(React.Fragment,null)))))))));}}]);return Center;}(Component);Center.contextType=MyContext;export default Center;","map":{"version":3,"sources":["/home/nicte/ironhack/Proyecto-Modulo-3/frontend/src/components/Centers/Center.js"],"names":["React","Component","MapboxDirections","mapboxgl","axios","Layout","MyContext","NavLink","accessToken","Center","state","center","user","JSON","parse","localStorage","getItem","get","props","match","params","id","then","res","setState","data","place","map","Map","container","mapContainer","style","navigator","geolocation","getCurrentPosition","position","user_location","coords","longitude","latitude","setZoom","setCenter","Marker","color","setLngLat","setPopup","Popup","setHTML","addTo","longitud","latitud","center_location","addControl","GeolocateControl","positionOptions","enableHighAccuracy","trackUserLocation","showUserLocation","unit","language","placeholderOrigin","placeholderDestination","NavigationControl","history","tipoResiduo","width","height","e","empresa","address","email","contactNumber","website","horario","role","contextType"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport MapboxDirections from \"@mapbox/mapbox-gl-directions/dist/mapbox-gl-directions\";\nimport mapboxgl from \"mapbox-gl\";\nimport axios from 'axios';\nimport Layout from '../Layout'\nimport {MyContext} from '../../context/index'\nimport { NavLink } from 'react-router-dom'\n\n\nmapboxgl.accessToken =\n  \"pk.eyJ1IjoibWx6eiIsImEiOiJjandrNmVzNzUwNWZjNGFqdGcwNmJ2ZWhpIn0.ybY6wnAtJwj-Tq0c46sW6A\";\n\nclass Center extends Component {\n    state = {\n              center: {},\n              user: JSON.parse(localStorage.getItem('user'))\n            }\n        \n\n\n  componentDidMount() {\n    axios.get(`https://young-beyond-07801.herokuapp.com/api/center/${this.props.match.params.id}`).then( res =>{\n    this.setState({center: res.data.place})\n    const map = new mapboxgl.Map({\n        container: this.mapContainer,\n        style: \"mapbox://styles/mapbox/streets-v9\"\n      });\n  \n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function(position) {\n          const user_location = [\n            position.coords.longitude,\n            position.coords.latitude\n          ];\n          map.setZoom(12).setCenter(user_location);\n          new mapboxgl.Marker({ color: \"red\" })\n            .setLngLat(user_location)\n            .setPopup(new mapboxgl.Popup().setHTML(\"<h3>Usted está aquí</h3>\"))\n            .addTo(map);\n        });\n      }\n\n    if(this.state.center.longitud && this.state.center.latitud){\n        const center_location = [this.state.center.longitud, this.state.center.latitud]\n        new mapboxgl.Marker({ color: \"green\" })\n        .setLngLat(center_location)\n        .setPopup(new mapboxgl.Popup().setHTML(\"<h3>Destino</h3>\"))\n        .addTo(map);\n    }\n  \n      map.addControl(\n        new mapboxgl.GeolocateControl({\n          positionOptions: {\n            enableHighAccuracy: true\n          },\n          trackUserLocation: true,\n          showUserLocation: true\n        })\n      );\n  \n      map.addControl(\n        new MapboxDirections({\n          accessToken: mapboxgl.accessToken,\n          unit: \"metric\",\n          language: \"es\",\n          placeholderOrigin: \"Seleccione su lugar de origen\",\n          placeholderDestination: \"Seleccione su destino\"\n        }),\n        \"top-left\"\n      );\n  \n      map.addControl(new mapboxgl.NavigationControl());\n  \n    })\n  }\n  render() {\n    const {user} = this.state\n    return (\n      <Layout history={this.props.history}>\n        <div className=\"section\">\n\n              <div className=\"container\">\n              <p className=\"has-text-centered category-center\">Categoria: {this.state.center.tipoResiduo}</p>\n\n                  <div className=\"columns\">\n                      <div\n                      className=\"column is -7 map\" style={{ width: \"50vw\", height: \"90vh\" }}\n                      ref={e => (this.mapContainer = e)}/>\n                      <div className=\"column is-5 data\">\n                        <div className=\"card\">\n                              <header className=\"card-header\">\n                                  <p className=\"card-header-title card-text\">\n                                      {this.state.center.empresa}\n                                  </p>\n                              </header>\n                              <div className=\"card-content\">\n                                  <div className=\"content\">\n                                      <p>Direccion: {this.state.center.address}</p>\n                                      <p>Email: {this.state.center.email ? this.state.center.email : 'No disponible'}</p>\n                                      <p>Numero: {this.state.center.contactNumber ? this.state.center.contactNumber : 'No disponible'}</p>\n                                      <p>Website: {this.state.center.website ? this.state.center.website : 'No disponible'}</p>\n                                      <p>Horario: {this.state.center.horario ? this.state.center.horario : 'No disponible'}</p>\n                                  </div>\n                                  <div className='home-button'>\n                                    {user.role === 'USUARIO' ?\n                                    <>\n                                      <NavLink exact to='/contribution'>\n                                      <button className='button is-primary'>Quiero contribuir!</button>\n                                      </NavLink>\n                                    </>\n                                    :\n                                    <></>\n                                    }\n                                  </div>\n                              </div>\n                          </div>\n                      </div>\n                  </div>\n              </div>\n        </div>\n      </Layout>\n    );\n  }\n}\nCenter.contextType = MyContext;\nexport default Center;"]},"metadata":{},"sourceType":"module"}