{"ast":null,"code":"import _classCallCheck from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _inherits from\"/home/nicte/ironhack/Proyecto-Modulo-3/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import React,{Component}from'react';import{MyContext}from'../../context/index';import QRCode from'qrcode.react';import{NavLink}from'react-router-dom';import axios from'axios';var Contribution=/*#__PURE__*/function(_Component){_inherits(Contribution,_Component);function Contribution(){_classCallCheck(this,Contribution);return _possibleConstructorReturn(this,_getPrototypeOf(Contribution).apply(this,arguments));}_createClass(Contribution,[{key:\"generate\",value:function generate(n){var add=1,max=12-add;// 12 is the min safe number Math.random() can generate without it starting to pad the end with zeros.   \nif(n>max){return this.generate(max)+this.generate(n-max);}max=Math.pow(10,n+add);var min=max/10;// Math.pow(10, n) basically\nvar number=Math.floor(Math.random()*(max-min+1))+min;return(\"\"+number).substring(add);}},{key:\"uploadPin\",value:function uploadPin(pin){var details={id:this.context.state.loggedUser._id,pin:pin};axios.post(\"https://young-beyond-07801.herokuapp.com/api/levelup\",details);}},{key:\"render\",value:function render(){var pin=this.generate(4);this.uploadPin(pin);console.log(pin);return React.createElement(\"div\",{className:\"qrcode-wrapper\"},React.createElement(\"div\",{className:\"qrcode-container container\"},React.createElement(\"div\",{className:\"columns is-centered\"},React.createElement(\"div\",{className:\"column is-5 box\"},React.createElement(\"br\",null),React.createElement(\"p\",{className:\"has-text-centered\"},\"Muestra  este codigo en el centro de acopio para que quede registrada tu aportacion!\"),React.createElement(\"div\",{className:\"qrcode\"},React.createElement(QRCode,{value:this.context.state.loggedUser._id+' '+pin})),React.createElement(\"div\",{className:\"button-contribution\"},React.createElement(NavLink,{to:\"/centers\"},React.createElement(\"button\",{className:\"button is-primary\"},\"Centros\")),React.createElement(NavLink,{to:\"/profile\"},React.createElement(\"button\",{className:\"button is-primary\"},\"Perfil\")))))));}}]);return Contribution;}(Component);export{Contribution as default};Contribution.contextType=MyContext;","map":{"version":3,"sources":["/home/nicte/ironhack/Proyecto-Modulo-3/frontend/src/components/Profile/Contribution.js"],"names":["React","Component","MyContext","QRCode","NavLink","axios","Contribution","n","add","max","generate","Math","pow","min","number","floor","random","substring","pin","details","id","context","state","loggedUser","_id","post","uploadPin","console","log","contextType"],"mappings":"40BAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAAQC,SAAR,KAAwB,qBAAxB,CACA,MAAOC,CAAAA,MAAP,KAAmB,cAAnB,CACA,OAASC,OAAT,KAAwB,kBAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,C,GAGqBC,CAAAA,Y,iSAERC,C,CAAG,CACR,GAAIC,CAAAA,GAAG,CAAG,CAAV,CAAaC,GAAG,CAAG,GAAKD,GAAxB,CAA+B;AAE/B,GAAKD,CAAC,CAAGE,GAAT,CAAe,CACP,MAAO,MAAKC,QAAL,CAAcD,GAAd,EAAqB,KAAKC,QAAL,CAAcH,CAAC,CAAGE,GAAlB,CAA5B,CACP,CAEDA,GAAG,CAAUE,IAAI,CAACC,GAAL,CAAS,EAAT,CAAaL,CAAC,CAACC,GAAf,CAAb,CACA,GAAIK,CAAAA,GAAG,CAAMJ,GAAG,CAAC,EAAjB,CAAqB;AACrB,GAAIK,CAAAA,MAAM,CAAGH,IAAI,CAACI,KAAL,CAAYJ,IAAI,CAACK,MAAL,IAAiBP,GAAG,CAAGI,GAAN,CAAY,CAA7B,CAAZ,EAAgDA,GAA7D,CAEA,MAAO,CAAC,GAAKC,MAAN,EAAcG,SAAd,CAAwBT,GAAxB,CAAP,CACH,C,4CAESU,G,CAAI,CACV,GAAMC,CAAAA,OAAO,CAAC,CAACC,EAAE,CAAC,KAAKC,OAAL,CAAaC,KAAb,CAAmBC,UAAnB,CAA8BC,GAAlC,CAAuCN,GAAG,CAACA,GAA3C,CAAd,CACAb,KAAK,CAACoB,IAAN,wDAAkEN,OAAlE,EACH,C,uCAEQ,CACL,GAAMD,CAAAA,GAAG,CAAG,KAAKR,QAAL,CAAc,CAAd,CAAZ,CACA,KAAKgB,SAAL,CAAeR,GAAf,EACAS,OAAO,CAACC,GAAR,CAAYV,GAAZ,EACA,MACI,4BAAK,SAAS,CAAC,gBAAf,EACI,2BAAK,SAAS,CAAC,4BAAf,EACI,2BAAK,SAAS,CAAC,qBAAf,EACA,2BAAK,SAAS,CAAC,iBAAf,EACI,8BADJ,CAEI,yBAAG,SAAS,CAAC,mBAAb,yFAFJ,CAGI,2BAAK,SAAS,CAAC,QAAf,EACA,oBAAC,MAAD,EAAQ,KAAK,CAAE,KAAKG,OAAL,CAAaC,KAAb,CAAmBC,UAAnB,CAA8BC,GAA9B,CAAkC,GAAlC,CAAsCN,GAArD,EADA,CAHJ,CAMI,2BAAK,SAAS,CAAC,qBAAf,EACI,oBAAC,OAAD,EAAS,EAAE,CAAC,UAAZ,EACI,8BAAQ,SAAS,CAAC,mBAAlB,YADJ,CADJ,CAII,oBAAC,OAAD,EAAS,EAAE,CAAC,UAAZ,EACI,8BAAQ,SAAS,CAAC,mBAAlB,WADJ,CAJJ,CANJ,CADA,CADJ,CADJ,CADJ,CAuBH,C,0BAhDqCjB,S,SAArBK,Y,aAmDrBA,YAAY,CAACuB,WAAb,CAA2B3B,SAA3B","sourcesContent":["import React, { Component } from 'react'\nimport {MyContext} from '../../context/index'\nimport QRCode from 'qrcode.react';\nimport { NavLink } from 'react-router-dom'\nimport axios from 'axios';\n\n\nexport default class Contribution extends Component {\n\n    generate(n) {\n        var add = 1, max = 12 - add;   // 12 is the min safe number Math.random() can generate without it starting to pad the end with zeros.   \n\n        if ( n > max ) {\n                return this.generate(max) + this.generate(n - max);\n        }\n\n        max        = Math.pow(10, n+add);\n        var min    = max/10; // Math.pow(10, n) basically\n        var number = Math.floor( Math.random() * (max - min + 1) ) + min;\n\n        return (\"\" + number).substring(add); \n    }\n\n    uploadPin(pin){\n        const details={id:this.context.state.loggedUser._id, pin:pin}\n        axios.post(`https://young-beyond-07801.herokuapp.com/api/levelup`,details)\n    }\n\n    render() {\n        const pin = this.generate(4)\n        this.uploadPin(pin)\n        console.log(pin)\n        return (\n            <div className=\"qrcode-wrapper\">\n                <div className=\"qrcode-container container\">\n                    <div className=\"columns is-centered\">\n                    <div className=\"column is-5 box\">\n                        <br/>\n                        <p className=\"has-text-centered\">Muestra  este codigo en el centro de acopio para que quede registrada tu aportacion!</p>\n                        <div className='qrcode'>\n                        <QRCode value={this.context.state.loggedUser._id+' '+pin} />\n                        </div>\n                        <div className='button-contribution'>\n                            <NavLink to='/centers'>\n                                <button className='button is-primary'>Centros</button>\n                            </NavLink>\n                            <NavLink to='/profile'>\n                                <button className='button is-primary'>Perfil</button>\n                            </NavLink>\n                        </div>\n                    </div>\n                    </div>\n                </div>\n            </div>\n        )\n    }\n}\n\nContribution.contextType = MyContext;\n"]},"metadata":{},"sourceType":"module"}